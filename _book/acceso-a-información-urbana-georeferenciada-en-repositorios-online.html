<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 3 Acceso a información urbana georeferenciada en repositorios online | Analítica Urbana</title>
  <meta name="description" content="Un manual para la obtención, procesamiento, análisis y visualización de datos urbanos" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 3 Acceso a información urbana georeferenciada en repositorios online | Analítica Urbana" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Un manual para la obtención, procesamiento, análisis y visualización de datos urbanos" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 3 Acceso a información urbana georeferenciada en repositorios online | Analítica Urbana" />
  
  <meta name="twitter:description" content="Un manual para la obtención, procesamiento, análisis y visualización de datos urbanos" />
  

<meta name="author" content="Antonio Vazquez Brust &amp; Angie Scetta" />


<meta name="date" content="2020-05-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="geoprocesamiento.html"/>
<link rel="next" href="obteniendo-y-analizando-datos-de-redes-sociales.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Analítica Urbana</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>¿Para quién es esto?</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#antes-de-empezar"><i class="fa fa-check"></i>Antes de empezar</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introducción</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#sobre-la-analítica-urbana"><i class="fa fa-check"></i><b>1.1</b> Sobre la analítica urbana</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="geoprocesamiento.html"><a href="geoprocesamiento.html"><i class="fa fa-check"></i><b>2</b> Geoprocesamiento</a><ul>
<li class="chapter" data-level="2.1" data-path="geoprocesamiento.html"><a href="geoprocesamiento.html#cruces-espaciales"><i class="fa fa-check"></i><b>2.1</b> Cruces espaciales</a></li>
<li class="chapter" data-level="2.2" data-path="geoprocesamiento.html"><a href="geoprocesamiento.html#dataframes-tradicionales-y-dataframes-espaciales"><i class="fa fa-check"></i><b>2.2</b> Dataframes tradicionales y dataframes espaciales</a><ul>
<li class="chapter" data-level="2.2.1" data-path="geoprocesamiento.html"><a href="geoprocesamiento.html#combinando-datasets-con-información-espacial"><i class="fa fa-check"></i><b>2.2.1</b> Combinando datasets con información espacial</a></li>
<li class="chapter" data-level="2.2.2" data-path="geoprocesamiento.html"><a href="geoprocesamiento.html#coropletas"><i class="fa fa-check"></i><b>2.2.2</b> Coropletas</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="geoprocesamiento.html"><a href="geoprocesamiento.html#uniones"><i class="fa fa-check"></i><b>2.3</b> Uniones</a></li>
<li class="chapter" data-level="2.4" data-path="geoprocesamiento.html"><a href="geoprocesamiento.html#intersecciones"><i class="fa fa-check"></i><b>2.4</b> Intersecciones</a></li>
<li class="chapter" data-level="2.5" data-path="geoprocesamiento.html"><a href="geoprocesamiento.html#distancias"><i class="fa fa-check"></i><b>2.5</b> Distancias</a></li>
<li class="chapter" data-level="2.6" data-path="geoprocesamiento.html"><a href="geoprocesamiento.html#cálculo-de-extensión-longitud-área"><i class="fa fa-check"></i><b>2.6</b> Cálculo de extensión (longitud, área)</a></li>
<li class="chapter" data-level="2.7" data-path="geoprocesamiento.html"><a href="geoprocesamiento.html#ejercicios"><i class="fa fa-check"></i><b>2.7</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html"><a href="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html"><i class="fa fa-check"></i><b>3</b> Acceso a información urbana georeferenciada en repositorios <em>online</em></a><ul>
<li class="chapter" data-level="3.1" data-path="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html"><a href="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html#openstreetmap-desde-r"><i class="fa fa-check"></i><b>3.1</b> OpenStreetMap desde R</a><ul>
<li class="chapter" data-level="3.1.1" data-path="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html"><a href="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html#definiendo-el-lugar"><i class="fa fa-check"></i><b>3.1.1</b> Definiendo el lugar</a></li>
<li class="chapter" data-level="3.1.2" data-path="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html"><a href="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html#extrayendo-información-de-openstreetmap"><i class="fa fa-check"></i><b>3.1.2</b> Extrayendo información de OpenStreetMap</a></li>
<li class="chapter" data-level="3.1.3" data-path="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html"><a href="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html#visualizando-los-resultados"><i class="fa fa-check"></i><b>3.1.3</b> Visualizando los resultados</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html"><a href="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html#un-ejercicio-más-bares-en-el-barrio"><i class="fa fa-check"></i><b>3.2</b> Un ejercicio más: ¡Bares en el barrio!</a></li>
<li class="chapter" data-level="3.3" data-path="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html"><a href="acceso-a-información-urbana-georeferenciada-en-repositorios-online.html#ejercicios-1"><i class="fa fa-check"></i><b>3.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html"><i class="fa fa-check"></i><b>4</b> Obteniendo y analizando datos de redes sociales</a><ul>
<li class="chapter" data-level="4.1" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#investigando-con-social-media"><i class="fa fa-check"></i><b>4.1</b> Investigando con social media</a><ul>
<li class="chapter" data-level="4.1.1" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#los-desafíos-de-trabajar-con-información-de-repositorios-sociales"><i class="fa fa-check"></i><b>4.1.1</b> Los desafíos de trabajar con información de repositorios sociales</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#conectando-r-a-twitter"><i class="fa fa-check"></i><b>4.2</b> Conectando R a Twitter</a><ul>
<li class="chapter" data-level="4.2.1" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#obteniendo-autorización"><i class="fa fa-check"></i><b>4.2.1</b> Obteniendo autorización</a></li>
<li class="chapter" data-level="4.2.2" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#acceso-a-twitter-via-r-el-paquete-rtweet"><i class="fa fa-check"></i><b>4.2.2</b> Acceso a Twitter via R: el paquete <em>rtweet</em></a></li>
<li class="chapter" data-level="4.2.3" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#usuarios-más-populares"><i class="fa fa-check"></i><b>4.2.3</b> Usuarios más populares</a></li>
<li class="chapter" data-level="4.2.4" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#tweets-más-populares"><i class="fa fa-check"></i><b>4.2.4</b> Tweets más populares</a></li>
<li class="chapter" data-level="4.2.5" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#la-hora-del-día-a-la-que-se-producen-los-tweets"><i class="fa fa-check"></i><b>4.2.5</b> La hora del día a la que se producen los tweets</a></li>
<li class="chapter" data-level="4.2.6" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#procedencia-de-los-usuarios"><i class="fa fa-check"></i><b>4.2.6</b> Procedencia de los usuarios</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#escuchando-tweets-en-tiempo-real"><i class="fa fa-check"></i><b>4.3</b> Escuchando tweets en tiempo real</a></li>
<li class="chapter" data-level="4.4" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#capturando-tweets-por-períodos-prolongados"><i class="fa fa-check"></i><b>4.4</b> Capturando tweets por períodos prolongados</a></li>
<li class="chapter" data-level="4.5" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#capturando-tweets-en-zonas-específicas"><i class="fa fa-check"></i><b>4.5</b> Capturando tweets en zonas específicas</a><ul>
<li class="chapter" data-level="4.5.1" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#extraer-las-coordenadas"><i class="fa fa-check"></i><b>4.5.1</b> Extraer las coordenadas</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#visualizando-los-datos-georeferenciados"><i class="fa fa-check"></i><b>4.6</b> Visualizando los datos georeferenciados</a><ul>
<li class="chapter" data-level="4.6.1" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#mapas-estáticos-con-ggmap"><i class="fa fa-check"></i><b>4.6.1</b> Mapas estáticos con ggmap</a></li>
<li class="chapter" data-level="4.6.2" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#mapas-interactivos-con-leaflet"><i class="fa fa-check"></i><b>4.6.2</b> Mapas interactivos con leaflet</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="obteniendo-y-analizando-datos-de-redes-sociales.html"><a href="obteniendo-y-analizando-datos-de-redes-sociales.html#ejercicios-2"><i class="fa fa-check"></i><b>4.7</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="analizando-dinámicas-espacio-temporales.html"><a href="analizando-dinámicas-espacio-temporales.html"><i class="fa fa-check"></i><b>5</b> Analizando dinámicas espacio-temporales</a><ul>
<li class="chapter" data-level="5.0.1" data-path="analizando-dinámicas-espacio-temporales.html"><a href="analizando-dinámicas-espacio-temporales.html#trabajando-con-fechas"><i class="fa fa-check"></i><b>5.0.1</b> Trabajando con fechas</a></li>
<li class="chapter" data-level="5.1" data-path="analizando-dinámicas-espacio-temporales.html"><a href="analizando-dinámicas-espacio-temporales.html#mirando-al-espacio"><i class="fa fa-check"></i><b>5.1</b> Mirando al espacio</a><ul>
<li class="chapter" data-level="5.1.1" data-path="analizando-dinámicas-espacio-temporales.html"><a href="analizando-dinámicas-espacio-temporales.html#obteniendo-un-mapa-base"><i class="fa fa-check"></i><b>5.1.1</b> Obteniendo un mapa base</a></li>
<li class="chapter" data-level="5.1.2" data-path="analizando-dinámicas-espacio-temporales.html"><a href="analizando-dinámicas-espacio-temporales.html#de-coordenadas-al-mapa"><i class="fa fa-check"></i><b>5.1.2</b> De coordenadas al mapa</a></li>
<li class="chapter" data-level="5.1.3" data-path="analizando-dinámicas-espacio-temporales.html"><a href="analizando-dinámicas-espacio-temporales.html#mapas-de-densidad"><i class="fa fa-check"></i><b>5.1.3</b> Mapas de densidad</a></li>
<li class="chapter" data-level="5.1.4" data-path="analizando-dinámicas-espacio-temporales.html"><a href="analizando-dinámicas-espacio-temporales.html#visualizando-multiples-categorías"><i class="fa fa-check"></i><b>5.1.4</b> Visualizando multiples categorías</a></li>
<li class="chapter" data-level="5.1.5" data-path="analizando-dinámicas-espacio-temporales.html"><a href="analizando-dinámicas-espacio-temporales.html#combinando-espacio-y-tiempo"><i class="fa fa-check"></i><b>5.1.5</b> Combinando espacio y tiempo</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="analizando-dinámicas-espacio-temporales.html"><a href="analizando-dinámicas-espacio-temporales.html#ejercicios-3"><i class="fa fa-check"></i><b>5.2</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="analizando-movimiento-el-flujo-de-viajes-urbanos.html"><a href="analizando-movimiento-el-flujo-de-viajes-urbanos.html"><i class="fa fa-check"></i><b>6</b> Analizando movimiento: el flujo de viajes urbanos</a><ul>
<li class="chapter" data-level="6.1" data-path="analizando-movimiento-el-flujo-de-viajes-urbanos.html"><a href="analizando-movimiento-el-flujo-de-viajes-urbanos.html#estimando-rutas"><i class="fa fa-check"></i><b>6.1</b> Estimando rutas</a></li>
<li class="chapter" data-level="6.2" data-path="analizando-movimiento-el-flujo-de-viajes-urbanos.html"><a href="analizando-movimiento-el-flujo-de-viajes-urbanos.html#cuantificando-interacción"><i class="fa fa-check"></i><b>6.2</b> Cuantificando interacción</a></li>
<li class="chapter" data-level="6.3" data-path="analizando-movimiento-el-flujo-de-viajes-urbanos.html"><a href="analizando-movimiento-el-flujo-de-viajes-urbanos.html#estimando-rutas-1"><i class="fa fa-check"></i><b>6.3</b> Estimando rutas</a></li>
<li class="chapter" data-level="6.4" data-path="analizando-movimiento-el-flujo-de-viajes-urbanos.html"><a href="analizando-movimiento-el-flujo-de-viajes-urbanos.html#extra-cómo-obtener-las-rutas-de-todos-los-recorridos"><i class="fa fa-check"></i><b>6.4</b> EXTRA: Cómo obtener las rutas de todos los recorridos</a></li>
<li class="chapter" data-level="6.5" data-path="analizando-movimiento-el-flujo-de-viajes-urbanos.html"><a href="analizando-movimiento-el-flujo-de-viajes-urbanos.html#ejercicios-4"><i class="fa fa-check"></i><b>6.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html"><i class="fa fa-check"></i><b>7</b> Machine Learning (en una aplicación urbana)</a><ul>
<li class="chapter" data-level="7.1" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#paso-0-cargar-paquetes"><i class="fa fa-check"></i><b>7.1</b> Paso 0: Cargar paquetes</a></li>
<li class="chapter" data-level="7.2" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#paso-1-cargar-los-datos"><i class="fa fa-check"></i><b>7.2</b> Paso 1: Cargar los datos</a></li>
<li class="chapter" data-level="7.3" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#paso-2-examinar-los-datos"><i class="fa fa-check"></i><b>7.3</b> Paso 2: Examinar los datos</a></li>
<li class="chapter" data-level="7.4" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#paso-3-limpiar-los-datos"><i class="fa fa-check"></i><b>7.4</b> Paso 3: Limpiar los datos</a><ul>
<li class="chapter" data-level="7.4.1" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#imputar-valores-faltantes"><i class="fa fa-check"></i><b>7.4.1</b> Imputar valores faltantes</a></li>
<li class="chapter" data-level="7.4.2" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#codificar-variables-categóricas"><i class="fa fa-check"></i><b>7.4.2</b> Codificar variables categóricas</a></li>
<li class="chapter" data-level="7.4.3" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#unificar-la-escala-de-las-variables-numéricas"><i class="fa fa-check"></i><b>7.4.3</b> Unificar la escala de las variables numéricas</a></li>
<li class="chapter" data-level="7.4.4" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#consolidar-todas-las-variables-generadas-ad-hoc-en-un-sólo-dataframe"><i class="fa fa-check"></i><b>7.4.4</b> Consolidar todas las variables generadas ad-hoc en un sólo dataframe</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#paso-4-crear-sets-de-entrenamiento-y-de-testeo"><i class="fa fa-check"></i><b>7.5</b> Paso 4: Crear sets de entrenamiento y de testeo</a><ul>
<li class="chapter" data-level="7.5.1" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#paso-5-entrenar-y-testear-un-modelo"><i class="fa fa-check"></i><b>7.5.1</b> Paso 5: Entrenar y testear un modelo</a></li>
<li class="chapter" data-level="7.5.2" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#midiendo-la-performance-del-modelo-contra-datos-que-no-conoce"><i class="fa fa-check"></i><b>7.5.2</b> Midiendo la performance del modelo contra datos que no conoce</a></li>
<li class="chapter" data-level="7.5.3" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#comparando-performance"><i class="fa fa-check"></i><b>7.5.3</b> Comparando performance</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="machine-learning-en-una-aplicación-urbana.html"><a href="machine-learning-en-una-aplicación-urbana.html#ejercicios-5"><i class="fa fa-check"></i><b>7.6</b> Ejercicios</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analítica Urbana</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="acceso-a-información-urbana-georeferenciada-en-repositorios-online" class="section level1">
<h1><span class="header-section-number">Capítulo 3</span> Acceso a información urbana georeferenciada en repositorios <em>online</em></h1>
<p><a href="openstreetmap.org">OpenStreetMap</a> es un servicio de mapas online que publica información contribuida en forma libre por más de un millón de voluntarios, que benefician a los 5,5 millones de usuarios de la plataforma.</p>
<p>Los contribuidores más entusiastas mapean barrios completos utilizando herramientas GPS para enviar información local completa, actualizada y precisa a OpenStreetMap. Varias empresas y entidades públicas que producen información geográfica también contribuyen al permitir que sus datos sean incluidos. Existen equipos profesionales de contribuidores que que se coordinan para agregar y mantener actualizada información georeferenciada de límites políticos, calles, edificios, negocios y otros puntos de interés; en ocasiones empleados por compañías que dependen de OpenStreetMap para el “mapa base” de sus productos, como mapbox.com y carto.com.</p>
<p>Toda la información disponible en OpenStreetMap puede ser descargada y reutilizada por cualquier persona, ya sea accediendo al mapa online, obteniendo una copia completa de la base de datos, o accediendo a los datos vía API.</p>
<div id="openstreetmap-desde-r" class="section level2">
<h2><span class="header-section-number">3.1</span> OpenStreetMap desde R</h2>
<p>Utilizaremos <a href="https://raw.githubusercontent.com/ropensci/osmdata/master/man/figures/title.png"><code>osmdata</code></a>, un paquete de R que permite acceder a los datos de OpenStreetMap (OSM de aquí en más) con sus atributos, geometría y posición.</p>
<p><img src="https://raw.githubusercontent.com/ropensci/osmdata/master/man/figures/title.png" /></p>
<p>Como siempre, si no tenemos aún el paquete lo instalamos:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;osmdata&quot;</span>)</a></code></pre></div>
<p>También vamos a hacer uso del paquete <code>leaflet</code>, que nos va a permitir generar de forma muy rápida mapas interactivos.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;leaflet&quot;</span>)</a></code></pre></div>
<p>Y los activamos junto a otros paquetes que vamos a utilizar:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1"><span class="kw">library</span>(osmdata)</a>
<a class="sourceLine" id="cb94-2" data-line-number="2"><span class="kw">library</span>(leaflet)</a>
<a class="sourceLine" id="cb94-3" data-line-number="3"><span class="kw">library</span>(tidyverse) <span class="co"># nuestra navaja suiza para manipulación y visualización de datos</span></a>
<a class="sourceLine" id="cb94-4" data-line-number="4"><span class="kw">library</span>(sf) <span class="co"># para procesar info espacial</span></a></code></pre></div>
<div id="definiendo-el-lugar" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Definiendo el lugar</h3>
<p>Antes de descargar información, definimos el lugar que queremos consultar. Éste puede ser un barrio, un municipio, un país, un continente… en este caso, lo intentaremos con la ciudad de Rosario.</p>
<p>Las funciones de <code>osmdata</code> nos permiten realizar consultas a Overpass (<a href="http://overpass-api.de/" class="uri">http://overpass-api.de/</a>), una interfaz que permite extraer información de la base de datos global de OpenStreetMap. Overpass requiere que se especifique una “bounding box”, es decir las coordenadas de un rectángulo que abarque la zona de interés.</p>
<p>Podemos obtener la bounding box de cualquier lugar con la función <code>getbb()</code>:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1">bbox &lt;-<span class="st"> </span><span class="kw">getbb</span>(<span class="st">&quot;Rosario, Santa Fe&quot;</span>)</a>
<a class="sourceLine" id="cb95-2" data-line-number="2">bbox</a></code></pre></div>
<pre><code>##         min       max
## x -60.78326 -60.61167
## y -33.03487 -32.86965</code></pre>
<p>Con <code>getbb()</code> también podemos obtener un polígono con los límites políticos, las fronteras exactas, de un lugar. Esto es muy útil para realizar mapas, o para filtrar la información que obtendremos luego para quedarnos sólo con la que corresponda a nuestra ciudad de interés, descartando la de áreas aledañas:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" data-line-number="1">bbox_poly &lt;-<span class="st"> </span><span class="kw">getbb</span>(<span class="st">&quot;Municipio de Rosario, Santa Fe&quot;</span>, <span class="dt">format_out =</span> <span class="st">&quot;sf_polygon&quot;</span>)</a></code></pre></div>
<p>Para asegurarnos de que tenemos el lugar que queremos, y no otro de nombre similar en alguna otra parte del mundo, lo verificamos en un mapa rápido provisto vía <code>leaflet</code>:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="kw">leaflet</span>(bbox_poly) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-2" data-line-number="2"><span class="st">    </span><span class="kw">addTiles</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb98-3" data-line-number="3"><span class="st">    </span><span class="kw">addPolygons</span>()</a></code></pre></div>
<div id="htmlwidget-7ae2091e0eacccc2e1d9" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-7ae2091e0eacccc2e1d9">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolygons","args":[[[[{"lng":[-60.7969586,-60.7969075,-60.7965454,-60.7963148,-60.7958546,-60.7958186,-60.7958109,-60.7913998,-60.7878979,-60.7826997,-60.7766558,-60.7712649,-60.7677518,-60.7659122,-60.7635362,-60.7623438,-60.7621402,-60.7621398,-60.7621972,-60.7622225,-60.7622226,-60.7622593,-60.7624846,-60.7629459,-60.7631712,-60.7632069,-60.7632475,-60.76329,-60.7633659,-60.7634757,-60.763654,-60.7642774,-60.7644479,-60.7648232,-60.7653813,-60.7657139,-60.7659607,-60.7661002,-60.7660969,-60.7660787,-60.7661006,-60.7661823,-60.7663025,-60.7662951,-60.7662939,-60.7663089,-60.7664194,-60.766599,-60.7667971,-60.7674042,-60.7678087,-60.7681878,-60.7684815,-60.7686966,-60.7689111,-60.7689755,-60.7689219,-60.7687417,-60.7687508,-60.7688342,-60.7690689,-60.7694377,-60.7697175,-60.7703174,-60.7707803,-60.7715142,-60.7736918,-60.7741168,-60.7745008,-60.7747745,-60.7750935,-60.7752653,-60.7754418,-60.7756202,-60.7758064,-60.7760002,-60.7767427,-60.777609,-60.7788749,-60.7795978,-60.7801088,-60.7809244,-60.7812136,-60.7815694,-60.7818294,-60.781895,-60.7821042,-60.7822697,-60.7823227,-60.782321,-60.7823524,-60.7824931,-60.7828286,-60.7830459,-60.7832623,-60.7831031,-60.7826443,-60.7816406,-60.7808206,-60.7773939,-60.7717818,-60.7645147,-60.7618163,-60.7618189,-60.7617579,-60.7616889,-60.7616697,-60.7616215,-60.7615995,-60.7615865,-60.7615355,-60.7614782,-60.7614185,-60.7614243,-60.7612949,-60.7609753,-60.7607711,-60.7580293,-60.7558656,-60.7524758,-60.749176,-60.747292,-60.7460981,-60.7446754,-60.7445763,-60.7444449,-60.7443203,-60.7442021,-60.7440833,-60.7434291,-60.7425858,-60.7417288,-60.7408852,-60.740031,-60.739374,-60.7391724,-60.7383223,-60.7374719,-60.7365817,-60.7357317,-60.7353008,-60.7348176,-60.73474,-60.7330365,-60.7326986,-60.732816,-60.7330577,-60.7330702,-60.7332014,-60.733224,-60.7333428,-60.733384,-60.7334746,-60.7335869,-60.7336003,-60.7336975,-60.7337327,-60.7338035,-60.7338567,-60.7339098,-60.7340084,-60.734032,-60.7342382,-60.7344263,-60.734509,-60.7346065,-60.7348178,-60.7349693,-60.7353991,-60.7358343,-60.7360918,-60.7361562,-60.7361664,-60.7361635,-60.7361531,-60.7361406,-60.7361318,-60.7361229,-60.7361007,-60.7360941,-60.7360671,-60.7360653,-60.7359934,-60.7359934,-60.7359933,-60.7359931,-60.7359404,-60.7359143,-60.7358743,-60.7358423,-60.7357897,-60.7351406,-60.7348391,-60.7346208,-60.7344858,-60.7344283,-60.7343717,-60.7335697,-60.7329303,-60.7324499,-60.7324177,-60.732394,-60.7323759,-60.732339,-60.7312776,-60.7309226,-60.7308919,-60.7307803,-60.7307375,-60.7304948,-60.7298761,-60.7297934,-60.7267464,-60.7216917,-60.7211292,-60.7209185,-60.7193224,-60.7170354,-60.7155367,-60.7154443,-60.7148932,-60.7133482,-60.7127862,-60.7122022,-60.7108788,-60.7107309,-60.709888,-60.7090461,-60.7088473,-60.708658,-60.7072527,-60.7062874,-60.705059,-60.7017767,-60.7018172,-60.7016443,-60.7014348,-60.7003797,-60.6997051,-60.6993738,-60.699194,-60.6990066,-60.6989483,-60.6987913,-60.698581,-60.6984037,-60.6983632,-60.6982948,-60.6982411,-60.6982349,-60.6982434,-60.6979569,-60.6975401,-60.6972275,-60.6967082,-60.6962357,-60.6926917,-60.691368,-60.6909553,-60.6906179,-60.6901927,-60.6899642,-60.6889334,-60.6875864,-60.6858698,-60.6848291,-60.6842394,-60.6836637,-60.682926,-60.682168,-60.6816409,-60.6800226,-60.6734136,-60.6714502,-60.6670407,-60.6644393,-60.6638047,-60.6602851,-60.6592275,-60.6586198,-60.6580827,-60.6575884,-60.6564422,-60.6557363,-60.6549638,-60.6543573,-60.6536955,-60.652855,-60.6520138,-60.6512709,-60.650553,-60.6497374,-60.6483419,-60.6474811,-60.6465568,-60.6447263,-60.6439742,-60.6429321,-60.6398965,-60.6387094,-60.6380841,-60.63711,-60.6366297,-60.6360362,-60.6354472,-60.6351349,-60.6350062,-60.6345908,-60.6342638,-60.6339894,-60.6338628,-60.6336631,-60.6334005,-60.6330731,-60.6327554,-60.6321023,-60.6317983,-60.6313209,-60.6310372,-60.630385,-60.6297116,-60.6293492,-60.6290977,-60.6287239,-60.6284815,-60.6281304,-60.6277951,-60.627299,-60.6269954,-60.6265446,-60.6262682,-60.6257924,-60.625097,-60.6247594,-60.6245351,-60.6242497,-60.6231147,-60.6224069,-60.6219231,-60.6215312,-60.621205,-60.6210101,-60.6207202,-60.6204982,-60.6202467,-60.6201272,-60.6196742,-60.6192609,-60.6186473,-60.6179111,-60.6172337,-60.6157521,-60.614701,-60.6144449,-60.6140772,-60.6137004,-60.6128178,-60.6116695,-60.6051322,-60.6058686,-60.606808,-60.6073488,-60.6089098,-60.6096827,-60.6100582,-60.6104305,-60.6117862,-60.6132721,-60.615111,-60.6179212,-60.6221507,-60.6517102,-60.6668164,-60.6701037,-60.6776173,-60.6798314,-60.6811678,-60.6822094,-60.6821053,-60.6824437,-60.6885094,-60.6891556,-60.6906214,-60.6912859,-60.6914804,-60.6927517,-60.69294,-60.6951769,-60.695944,-60.6965019,-60.6966774,-60.6973012,-60.6977491,-60.6981191,-60.6983741,-60.6989337,-60.6989808,-60.6992538,-60.699385,-60.6995346,-60.6996842,-60.6999363,-60.7013264,-60.7014602,-60.7028823,-60.7045393,-60.7049774,-60.7053002,-60.7061081,-60.7062033,-60.7062561,-60.7065318,-60.7065923,-60.7068245,-60.7086145,-60.7102851,-60.7168208,-60.7182812,-60.7209999,-60.7225538,-60.7228172,-60.7250518,-60.7254801,-60.7288878,-60.7302849,-60.7317148,-60.7333575,-60.7347997,-60.7357864,-60.7406478,-60.7441806,-60.7446809,-60.7448741,-60.7453446,-60.7478592,-60.7530109,-60.7532464,-60.7533485,-60.7534498,-60.7536556,-60.7541668,-60.7544987,-60.7548905,-60.754992,-60.755496,-60.7581595,-60.7665905,-60.7819018,-60.7815267,-60.7812189,-60.7812125,-60.7811682,-60.7807221,-60.7799078,-60.7782541,-60.770999,-60.7703553,-60.7848527,-60.7953021,-60.7968699,-60.7969586],"lat":[-32.8968852,-32.8969684,-32.8973873,-32.8977161,-32.8983376,-32.8984053,-32.898458,-32.9043713,-32.9089576,-32.9151443,-32.9223597,-32.9229171,-32.9232887,-32.9234833,-32.9237347,-32.9238608,-32.9238834,-32.9238841,-32.9240831,-32.9241686,-32.9241689,-32.9243115,-32.9245816,-32.9248428,-32.9250319,-32.925156,-32.9252938,-32.9254442,-32.9255795,-32.9257214,-32.9258784,-32.9262957,-32.9264098,-32.9265503,-32.9266439,-32.926815,-32.9271392,-32.9274904,-32.9275835,-32.9281028,-32.9287766,-32.9291922,-32.9295794,-32.930623,-32.9307874,-32.930945,-32.9311982,-32.9314943,-32.9317996,-32.9323154,-32.932621,-32.9329031,-32.9332245,-32.9335508,-32.933992,-32.9344152,-32.9348565,-32.9359141,-32.9362701,-32.9364718,-32.9367862,-32.9371291,-32.9373605,-32.9376877,-32.9378649,-32.9381157,-32.9388475,-32.9390302,-32.9392821,-32.9395522,-32.9400513,-32.9406842,-32.9414388,-32.9422115,-32.9427311,-32.9429943,-32.9436222,-32.9442749,-32.9452332,-32.9456462,-32.9458866,-32.9462917,-32.9464442,-32.946689,-32.9469114,-32.9470078,-32.9473154,-32.9475598,-32.9476376,-32.947689,-32.947764,-32.9478501,-32.9480114,-32.9482207,-32.9482864,-32.9487016,-32.9491009,-32.9491492,-32.9491447,-32.9491015,-32.9489718,-32.9488279,-32.9487565,-32.9488554,-32.948935,-32.9490064,-32.9491949,-32.9496296,-32.949956,-32.9505179,-32.9507592,-32.9518399,-32.952768,-32.9532206,-32.9549211,-32.961068,-32.9653393,-32.9652307,-32.9651535,-32.9650326,-32.9648633,-32.9648121,-32.9647422,-32.9647194,-32.9647221,-32.9647345,-32.9647722,-32.9647851,-32.9647938,-32.9647723,-32.9647446,-32.9647165,-32.9646888,-32.9646607,-32.9646391,-32.9646325,-32.9646046,-32.9645767,-32.9645475,-32.9645195,-32.964471,-32.9644493,-32.9644454,-32.9643599,-32.9643429,-32.9650326,-32.9664533,-32.966525,-32.9672077,-32.9673257,-32.9679441,-32.9681582,-32.9686301,-32.9692143,-32.9692842,-32.9698326,-32.9700314,-32.9704305,-32.9707311,-32.9710307,-32.9715866,-32.97172,-32.97271,-32.9736131,-32.9740103,-32.9744786,-32.9752014,-32.9757196,-32.9770871,-32.9785776,-32.9793866,-32.9796656,-32.9799186,-32.9799759,-32.980181,-32.9802771,-32.9803452,-32.9804133,-32.9805838,-32.9806745,-32.9810477,-32.9810943,-32.9822631,-32.9823045,-32.9823429,-32.9824736,-32.9831293,-32.9833087,-32.9835834,-32.983803,-32.983956,-32.9856703,-32.9865062,-32.9871116,-32.9874967,-32.987661,-32.9878102,-32.989928,-32.9916155,-32.9929222,-32.9930097,-32.9930733,-32.9931217,-32.9932172,-32.9959645,-32.9969143,-32.9969965,-32.9972952,-32.9974097,-32.9980389,-32.9996429,-32.9998572,-33.0078398,-33.0076318,-33.0076086,-33.0077319,-33.0110219,-33.0156396,-33.0187911,-33.018966,-33.0195642,-33.0213156,-33.0219701,-33.0226316,-33.0242065,-33.0243248,-33.0246279,-33.0249041,-33.0250319,-33.0252401,-33.0266833,-33.0281312,-33.0298625,-33.0345462,-33.0346305,-33.0347126,-33.0350149,-33.0364079,-33.0373147,-33.0377731,-33.0380512,-33.0381064,-33.0382062,-33.038272,-33.0384228,-33.0384653,-33.0385162,-33.0385268,-33.0386802,-33.0387757,-33.0388825,-33.0388951,-33.0389608,-33.0389179,-33.0386451,-33.0383389,-33.0360092,-33.0351334,-33.0349494,-33.0348793,-33.0348538,-33.0348662,-33.0347178,-33.0343647,-33.0330695,-33.0316753,-33.0304868,-33.0298916,-33.02956,-33.0294576,-33.0295163,-33.0296875,-33.0285541,-33.0282111,-33.0274297,-33.0269266,-33.0268094,-33.0261179,-33.0258781,-33.0257682,-33.0257386,-33.0258095,-33.0261254,-33.0260948,-33.0257714,-33.0254302,-33.025079,-33.0245009,-33.0237961,-33.0234594,-33.0231393,-33.0227366,-33.0217565,-33.0213082,-33.0209891,-33.0194315,-33.0188768,-33.0184969,-33.0178283,-33.0173268,-33.0167113,-33.0154614,-33.0149827,-33.014599,-33.0143254,-33.013978,-33.013866,-33.0134364,-33.0130022,-33.0125553,-33.0122842,-33.0117535,-33.0112271,-33.0107639,-33.0104136,-33.0097117,-33.0093783,-33.0089808,-33.0088285,-33.0084783,-33.0078434,-33.0074844,-33.0072222,-33.006732,-33.0063996,-33.0060291,-33.0056529,-33.0053585,-33.0050602,-33.0047543,-33.0045415,-33.0043136,-33.0042699,-33.0042319,-33.0041274,-33.0040286,-33.004116,-33.0042717,-33.0043506,-33.004306,-33.0042053,-33.0040438,-33.0037284,-33.0032933,-33.0029229,-33.0028344,-33.0024627,-33.0021066,-33.0016925,-33.0013535,-33.0011826,-33.0005822,-32.9999286,-32.9996381,-32.9992765,-32.9989818,-32.9985777,-32.9981736,-32.9976757,-32.9959812,-32.9930539,-32.9901689,-32.9770328,-32.9667215,-32.9631559,-32.9587795,-32.954753,-32.9523877,-32.9499741,-32.9471448,-32.9440421,-32.9257617,-32.9119282,-32.9061086,-32.8929459,-32.8879298,-32.8832213,-32.8769295,-32.8721293,-32.8688946,-32.8696532,-32.8697844,-32.8702813,-32.8704163,-32.8704534,-32.8705745,-32.8705944,-32.8708061,-32.8709143,-32.8710314,-32.871069,-32.8712026,-32.8712612,-32.8712841,-32.8712882,-32.8712878,-32.8712812,-32.8711567,-32.8710677,-32.8710367,-32.8710057,-32.8710552,-32.871112,-32.8711175,-32.8711756,-32.8712434,-32.8712613,-32.8712745,-32.8713075,-32.871294,-32.871267,-32.8713087,-32.8713188,-32.8713289,-32.8713944,-32.8714649,-32.8717409,-32.8718026,-32.871891,-32.8719732,-32.8719842,-32.8720931,-32.872114,-32.872279,-32.8723208,-32.8723629,-32.8724329,-32.8724906,-32.8725332,-32.8727444,-32.8728916,-32.8729132,-32.8729206,-32.8729418,-32.8730382,-32.8732304,-32.8732392,-32.8732809,-32.8733743,-32.8732509,-32.8732926,-32.8732924,-32.8732955,-32.8732992,-32.8733203,-32.8734319,-32.8737776,-32.8744265,-32.8801036,-32.8856568,-32.8857799,-32.8858562,-32.8857708,-32.8857273,-32.8856579,-32.885367,-32.896025,-32.8965538,-32.8968409,-32.896884,-32.8968852]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-33.0389608,-32.8688946],"lng":[-60.7969586,-60.6051322]}},"evals":[],"jsHooks":[]}</script>
<p>Luce bien, así que continuamos.</p>
</div>
<div id="extrayendo-información-de-openstreetmap" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Extrayendo información de OpenStreetMap</h3>
<p>El siguiente paso es utilizar la función <code>add_osm_feature()</code> para especificar los datos que queremos descargar. Esto requiere conocer las palabras clave con las que se identifican los registras en la base de OSM, que permiten indicar con gran detalle el tipo de datos georeferenciados que queremos: ya sean áreas de parques públicos, posición de oficinas de correo o cajeros automáticos, vías de ferrocarril… u otro, en un larguísimo etcétera que se puede consultar en <a href="https://wiki.openstreetmap.org/wiki/Map_Features" class="uri">https://wiki.openstreetmap.org/wiki/Map_Features</a><br />
En este caso vamos a solicitar todas las vías de circulación (calles, avenidas, autopistas, etc) de la ciudad. En la base de datos de OSM todas aparecen con la clave <em>“highway”</em>.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1">rosario &lt;-<span class="st"> </span><span class="kw">opq</span>(bbox) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb99-2" data-line-number="2"><span class="st">    </span><span class="kw">add_osm_feature</span>(<span class="dt">key =</span> <span class="st">&quot;highway&quot;</span>)</a></code></pre></div>
<p>Observemos que lo único que hemos obtenido hasta ahora es la definición de una consulta (qué y en dónde), pero aun no descargamos ningún dato:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" data-line-number="1">rosario</a></code></pre></div>
<pre><code>## $bbox
## [1] &quot;-33.0348662,-60.7832623,-32.8696532,-60.6116695&quot;
## 
## $prefix
## [1] &quot;[out:xml][timeout:25];\n(\n&quot;
## 
## $suffix
## [1] &quot;);\n(._;&gt;;);\nout body;&quot;
## 
## $features
## [1] &quot; [\&quot;highway\&quot;]&quot;
## 
## attr(,&quot;class&quot;)
## [1] &quot;list&quot;           &quot;overpass_query&quot;</code></pre>
<p>Es sólo la definición de una consulta a la base de datos de OpenStreetMap: “Todas las calles (objetos con clave”highway“) dentro de éste rectángulo (que sabemos, corresponde a Rosario)”. Para hacer efectiva la consulta y descargar los datos, la pasamos por la función <code>osmdata_sf()</code> que recolecta lo que buscamos y lo entrega en forma de dataset espacial:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1">rosario &lt;-<span class="st"> </span>rosario <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb102-2" data-line-number="2"><span class="st">    </span><span class="kw">osmdata_sf</span>()</a></code></pre></div>
<p>La descarga de información para una ciudad grande puede tomar varios minutos, y más aún la de un área metropolitana (o país, o continente, etc) así que es normal esperar un poco en ésta parte.</p>
<p>En cuanto se completa, ya tenemos calles:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" data-line-number="1">rosario</a></code></pre></div>
<p>La consulta devolvió toda la información de puntos, líneas y polígonos disponibles en la base de OSM. A nos otros nos interesan las líneas, <em>“osm_lines”</em>, que demarcan la traza de las calles. Los registros con otras geometrías, como polígonos, pueden representar elementos asociados a las calles como bulevares o áreas de vereda que no vamos a usar por el momento.</p>
<p>Del conjunto de datos disponibles, extraemos el dataframe con líneas, y chequeamos los atributos disponibles. Todos han sido recopilados por la comunidad de OpenStreetMap.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1">calles &lt;-<span class="st"> </span>rosario<span class="op">$</span>osm_lines</a>
<a class="sourceLine" id="cb104-2" data-line-number="2"></a>
<a class="sourceLine" id="cb104-3" data-line-number="3"><span class="co"># mostramos sólo las primeras 10 columnas... porque tiene montones!</span></a>
<a class="sourceLine" id="cb104-4" data-line-number="4"><span class="kw">head</span>(calles[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,]) </a></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 283 fields
## geometry type:  LINESTRING
## dimension:      XY
## bbox:           xmin: -60.71891 ymin: -33.01829 xmax: -60.65706 ymax: -32.86627
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
##            osm_id                                 name abandoned.highway
## 10585611 10585611            Autopista Juan José Valle              &lt;NA&gt;
## 23633084 23633084 Avenida de Circunvalación 25 de Mayo              &lt;NA&gt;
## 23633086 23633086    Puente Nuestra Señora del Rosario              &lt;NA&gt;
## 23633100 23633100 Avenida de Circunvalación 25 de Mayo              &lt;NA&gt;
## 23633101 23633101 Avenida de Circunvalación 25 de Mayo              &lt;NA&gt;
## 23644546 23644546 Avenida de Circunvalación 25 de Mayo              &lt;NA&gt;
##          abandoned.railway.left abandoned.surface abutters access access.lanes
## 10585611                   &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;         &lt;NA&gt;
## 23633084                   &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;         &lt;NA&gt;
## 23633086                   &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;         &lt;NA&gt;
## 23633100                   &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;         &lt;NA&gt;
## 23633101                   &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;         &lt;NA&gt;
## 23644546                   &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;         &lt;NA&gt;
##          addr.city addr.housenumber addr.postcode addr.street agricultural
## 10585611      &lt;NA&gt;             &lt;NA&gt;          &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;
## 23633084      &lt;NA&gt;             &lt;NA&gt;          &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;
## 23633086      &lt;NA&gt;             &lt;NA&gt;          &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;
## 23633100      &lt;NA&gt;             &lt;NA&gt;          &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;
## 23633101      &lt;NA&gt;             &lt;NA&gt;          &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;
## 23644546      &lt;NA&gt;             &lt;NA&gt;          &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;
##                             alt_name amenity arcade.left arcade.right area
## 10585611             Ruta Nacional 9    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
## 23633084 Doctor Constantino Razzetti    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
## 23633086                        &lt;NA&gt;    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
## 23633100 Doctor Constantino Razzetti    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
## 23633101 Doctor Constantino Razzetti    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
## 23644546 Doctor Constantino Razzetti    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
##          barrier bench bicycle bicycle.lanes bicycle.oneway bicycle_road  bin
## 10585611    &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
## 23633084    &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
## 23633086    &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
## 23633100    &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
## 23633101    &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
## 23644546    &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt; &lt;NA&gt;
##              bridge bridge.name bridge.structure bridge.support building  bus
## 10585611       &lt;NA&gt;        &lt;NA&gt;             &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;
## 23633084       &lt;NA&gt;        &lt;NA&gt;             &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;
## 23633086 cantilever        &lt;NA&gt;             beam          pylon     &lt;NA&gt; &lt;NA&gt;
## 23633100        yes        &lt;NA&gt;             &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;
## 23633101       &lt;NA&gt;        &lt;NA&gt;             &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;
## 23644546    viaduct        &lt;NA&gt;             &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;
##          bus.lanes bus_bay busway.left busway.right change.backward
## 10585611      &lt;NA&gt;    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;            &lt;NA&gt;
## 23633084      &lt;NA&gt;    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;            &lt;NA&gt;
## 23633086      &lt;NA&gt;    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;            &lt;NA&gt;
## 23633100      &lt;NA&gt;    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;            &lt;NA&gt;
## 23633101      &lt;NA&gt;    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;            &lt;NA&gt;
## 23644546      &lt;NA&gt;    &lt;NA&gt;        &lt;NA&gt;         &lt;NA&gt;            &lt;NA&gt;
##          change.forward change.lanes change.lanes.backward change.lanes.forward
## 10585611           &lt;NA&gt;         &lt;NA&gt;                  &lt;NA&gt;                 &lt;NA&gt;
## 23633084           &lt;NA&gt;         &lt;NA&gt;                  &lt;NA&gt;                 &lt;NA&gt;
## 23633086           &lt;NA&gt;         &lt;NA&gt;                  &lt;NA&gt;                 &lt;NA&gt;
## 23633100           &lt;NA&gt;         &lt;NA&gt;                  &lt;NA&gt;                 &lt;NA&gt;
## 23633101           &lt;NA&gt;         &lt;NA&gt;                  &lt;NA&gt;                 &lt;NA&gt;
## 23644546           &lt;NA&gt;         &lt;NA&gt;                  &lt;NA&gt;                 &lt;NA&gt;
##          check_date construction construction.highway construction.lanes
## 10585611       &lt;NA&gt;         &lt;NA&gt;                 &lt;NA&gt;               &lt;NA&gt;
## 23633084       &lt;NA&gt;         &lt;NA&gt;                 &lt;NA&gt;               &lt;NA&gt;
## 23633086       &lt;NA&gt;         &lt;NA&gt;                 &lt;NA&gt;               &lt;NA&gt;
## 23633100       &lt;NA&gt;         &lt;NA&gt;                 &lt;NA&gt;               &lt;NA&gt;
## 23633101       &lt;NA&gt;         &lt;NA&gt;                 &lt;NA&gt;               &lt;NA&gt;
## 23644546       &lt;NA&gt;         &lt;NA&gt;                 &lt;NA&gt;               &lt;NA&gt;
##          construction.maxspeed construction.name construction.oneway
## 10585611                  &lt;NA&gt;              &lt;NA&gt;                &lt;NA&gt;
## 23633084                  &lt;NA&gt;              &lt;NA&gt;                &lt;NA&gt;
## 23633086                  &lt;NA&gt;              &lt;NA&gt;                &lt;NA&gt;
## 23633100                  &lt;NA&gt;              &lt;NA&gt;                &lt;NA&gt;
## 23633101                  &lt;NA&gt;              &lt;NA&gt;                &lt;NA&gt;
## 23644546                  &lt;NA&gt;              &lt;NA&gt;                &lt;NA&gt;
##          construction.surface contact.website conveying covered crossing
## 10585611                 &lt;NA&gt;            &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;
## 23633084                 &lt;NA&gt;            &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;
## 23633086                 &lt;NA&gt;            &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;
## 23633100                 &lt;NA&gt;            &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;
## 23633101                 &lt;NA&gt;            &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;
## 23644546                 &lt;NA&gt;            &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;
##          crossing_ref cutting cycleway cycleway.left cycleway.left.oneway
## 10585611         &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;          &lt;NA&gt;                 &lt;NA&gt;
## 23633084         &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;          &lt;NA&gt;                 &lt;NA&gt;
## 23633086         &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;          &lt;NA&gt;                 &lt;NA&gt;
## 23633100         &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;          &lt;NA&gt;                 &lt;NA&gt;
## 23633101         &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;          &lt;NA&gt;                 &lt;NA&gt;
## 23644546         &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;          &lt;NA&gt;                 &lt;NA&gt;
##          cycleway.left.surface cycleway.right description description.cycleway
## 10585611                  &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;                 &lt;NA&gt;
## 23633084                  &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;                 &lt;NA&gt;
## 23633086                  &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;                 &lt;NA&gt;
## 23633100                  &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;                 &lt;NA&gt;
## 23633101                  &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;                 &lt;NA&gt;
## 23644546                  &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;                 &lt;NA&gt;
##          designation    destination destination.backward destination.forward
## 10585611        &lt;NA&gt;           &lt;NA&gt;                 &lt;NA&gt;                &lt;NA&gt;
## 23633084        &lt;NA&gt;           &lt;NA&gt;                 &lt;NA&gt;                &lt;NA&gt;
## 23633086        &lt;NA&gt; Victoria RN174                 &lt;NA&gt;                &lt;NA&gt;
## 23633100        &lt;NA&gt;           &lt;NA&gt;                 &lt;NA&gt;                &lt;NA&gt;
## 23633101        &lt;NA&gt;           &lt;NA&gt;                 &lt;NA&gt;                &lt;NA&gt;
## 23644546        &lt;NA&gt;           &lt;NA&gt;                 &lt;NA&gt;                &lt;NA&gt;
##                  destination.lanes destination.ref destination.ref.forward
## 10585611                      &lt;NA&gt;            &lt;NA&gt;                    &lt;NA&gt;
## 23633084                      &lt;NA&gt;            &lt;NA&gt;                    &lt;NA&gt;
## 23633086                      &lt;NA&gt;            &lt;NA&gt;                    &lt;NA&gt;
## 23633100 Victoria|Victoria|Rosario            &lt;NA&gt;                    &lt;NA&gt;
## 23633101 Victoria|Victoria|Rosario            &lt;NA&gt;                    &lt;NA&gt;
## 23644546                      &lt;NA&gt;            &lt;NA&gt;                    &lt;NA&gt;
##          destination.ref.lanes destination.street
## 10585611                  &lt;NA&gt;               &lt;NA&gt;
## 23633084                  &lt;NA&gt;               &lt;NA&gt;
## 23633086                  &lt;NA&gt;               &lt;NA&gt;
## 23633100      RN174|RN174|RN11               &lt;NA&gt;
## 23633101      RN174|RN174|RN11               &lt;NA&gt;
## 23644546                  &lt;NA&gt;               &lt;NA&gt;
##                                                                  destination.street.lanes
## 10585611                                                                             &lt;NA&gt;
## 23633084                                                                             &lt;NA&gt;
## 23633086                                                                             &lt;NA&gt;
## 23633100                                                                             &lt;NA&gt;
## 23633101 Puente Rosario - Victoria|Puente Rosario - Victoria|Bulevar General José Rondeau
## 23644546                                                                             &lt;NA&gt;
##          destination.symbol destination.symbol.forward destination.symbol.lanes
## 10585611               &lt;NA&gt;                       &lt;NA&gt;                     &lt;NA&gt;
## 23633084               &lt;NA&gt;                       &lt;NA&gt;                     &lt;NA&gt;
## 23633086               &lt;NA&gt;                       &lt;NA&gt;                     &lt;NA&gt;
## 23633100               &lt;NA&gt;                       &lt;NA&gt;     bridge|bridge|centre
## 23633101               &lt;NA&gt;                       &lt;NA&gt;     bridge|bridge|centre
## 23644546               &lt;NA&gt;                       &lt;NA&gt;                     &lt;NA&gt;
##          destination.to distance disused disused.highway disused.maxspeed
## 10585611           &lt;NA&gt;     &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;
## 23633084           &lt;NA&gt;     &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;
## 23633086           &lt;NA&gt;     &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;
## 23633100           &lt;NA&gt;     &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;
## 23633101           &lt;NA&gt;     &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;
## 23644546           &lt;NA&gt;     &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;
##          disused.turn.lanes.backward drinking_water embankment embedded_rails
## 10585611                        &lt;NA&gt;           &lt;NA&gt;       &lt;NA&gt;           &lt;NA&gt;
## 23633084                        &lt;NA&gt;           &lt;NA&gt;        yes           &lt;NA&gt;
## 23633086                        &lt;NA&gt;           &lt;NA&gt;       &lt;NA&gt;           &lt;NA&gt;
## 23633100                        &lt;NA&gt;           &lt;NA&gt;       &lt;NA&gt;           &lt;NA&gt;
## 23633101                        &lt;NA&gt;           &lt;NA&gt;       &lt;NA&gt;           &lt;NA&gt;
## 23644546                        &lt;NA&gt;           &lt;NA&gt;       &lt;NA&gt;           &lt;NA&gt;
##          emergency emergency.lanes fence_type fixme flood_prone floor.material
## 10585611      &lt;NA&gt;            &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;           &lt;NA&gt;
## 23633084      &lt;NA&gt;            &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;           &lt;NA&gt;
## 23633086      &lt;NA&gt;            &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;           &lt;NA&gt;
## 23633100      &lt;NA&gt;            &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;           &lt;NA&gt;
## 23633101      &lt;NA&gt;            &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;           &lt;NA&gt;
## 23644546      &lt;NA&gt;            &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;           &lt;NA&gt;
##          foot foot.lanes footway golf golf_cart goods handrail handrail.center
## 10585611 &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
## 23633084 &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
## 23633086 &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
## 23633100 &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
## 23633101 &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
## 23644546 &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
##          handrail.left handrail.right hazard height  hgv  highway historic
## 10585611          &lt;NA&gt;           &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt; motorway     &lt;NA&gt;
## 23633084          &lt;NA&gt;           &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt; motorway     &lt;NA&gt;
## 23633086          &lt;NA&gt;           &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt; motorway     &lt;NA&gt;
## 23633100          &lt;NA&gt;           &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt; motorway     &lt;NA&gt;
## 23633101          &lt;NA&gt;           &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt; motorway     &lt;NA&gt;
## 23644546          &lt;NA&gt;           &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt; motorway     &lt;NA&gt;
##          horse  hov incline indoor indoor.highway int_name internet_access
## 10585611  &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
## 23633084  &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
## 23633086  &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
## 23633100  &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
## 23633101  &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
## 23644546  &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt;            &lt;NA&gt;
##          internet_access.fee internet_access.operator junction kerb landcover
## 10585611                &lt;NA&gt;                     &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;
## 23633084                &lt;NA&gt;                     &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;
## 23633086                &lt;NA&gt;                     &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;
## 23633100                &lt;NA&gt;                     &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;
## 23633101                &lt;NA&gt;                     &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;
## 23644546                &lt;NA&gt;                     &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;
##          landuse lanes lanes.backward lanes.bicycle lanes.bus lanes.forward
## 10585611    &lt;NA&gt;     2           &lt;NA&gt;          &lt;NA&gt;      &lt;NA&gt;          &lt;NA&gt;
## 23633084    &lt;NA&gt;     3           &lt;NA&gt;          &lt;NA&gt;      &lt;NA&gt;          &lt;NA&gt;
## 23633086    &lt;NA&gt;     2           &lt;NA&gt;          &lt;NA&gt;      &lt;NA&gt;          &lt;NA&gt;
## 23633100    &lt;NA&gt;     3           &lt;NA&gt;          &lt;NA&gt;      &lt;NA&gt;          &lt;NA&gt;
## 23633101    &lt;NA&gt;     3           &lt;NA&gt;          &lt;NA&gt;      &lt;NA&gt;          &lt;NA&gt;
## 23644546    &lt;NA&gt;     3           &lt;NA&gt;          &lt;NA&gt;      &lt;NA&gt;          &lt;NA&gt;
##          lanes.psv lanes.psv.conditional layer leisure level  lit lit.type
## 10585611      &lt;NA&gt;                  &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;     &lt;NA&gt;
## 23633084      &lt;NA&gt;                  &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;  yes     &lt;NA&gt;
## 23633086      &lt;NA&gt;                  &lt;NA&gt;     2    &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;     &lt;NA&gt;
## 23633100      &lt;NA&gt;                  &lt;NA&gt;     1    &lt;NA&gt;  &lt;NA&gt;  yes     &lt;NA&gt;
## 23633101      &lt;NA&gt;                  &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;  yes     &lt;NA&gt;
## 23644546      &lt;NA&gt;                  &lt;NA&gt;     1    &lt;NA&gt;  &lt;NA&gt;  yes     &lt;NA&gt;
##          loc_ref man_made material maxheight maxheight.physical maxspeed
## 10585611    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;       4.5               &lt;NA&gt;      120
## 23633084    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;               &lt;NA&gt;      100
## 23633086    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;               &lt;NA&gt;       80
## 23633100    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;               &lt;NA&gt;      100
## 23633101    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;               &lt;NA&gt;      100
## 23644546    &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;               &lt;NA&gt;      100
##          maxspeed.bus maxspeed.hgv maxspeed.lanes maxspeed.type memorial
## 10585611         &lt;NA&gt;         &lt;NA&gt;           &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;
## 23633084           90           80           &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;
## 23633086         &lt;NA&gt;           60           &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;
## 23633100           90           80           &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;
## 23633101           90           80           &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;
## 23644546           90           80           &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;
##          minspeed mooring motor_vehicle motor_vehicle.conditional
## 10585611     &lt;NA&gt;    &lt;NA&gt;          &lt;NA&gt;                      &lt;NA&gt;
## 23633084       60    &lt;NA&gt;          &lt;NA&gt;                      &lt;NA&gt;
## 23633086       55    &lt;NA&gt;          &lt;NA&gt;                      &lt;NA&gt;
## 23633100       60    &lt;NA&gt;          &lt;NA&gt;                      &lt;NA&gt;
## 23633101       60    &lt;NA&gt;          &lt;NA&gt;                      &lt;NA&gt;
## 23644546       60    &lt;NA&gt;          &lt;NA&gt;                      &lt;NA&gt;
##          motor_vehicle.lanes motorcar motorcycle motorroad mtb.scale
## 10585611                &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
## 23633084                &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       yes      &lt;NA&gt;
## 23633086                &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
## 23633100                &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       yes      &lt;NA&gt;
## 23633101                &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       yes      &lt;NA&gt;
## 23644546                &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       yes      &lt;NA&gt;
##          mtb.scale.uphill name.bridge name.etymology.wikidata natural network
## 10585611             &lt;NA&gt;        &lt;NA&gt;                    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;
## 23633084             &lt;NA&gt;        &lt;NA&gt;                    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;
## 23633086             &lt;NA&gt;        &lt;NA&gt;                    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;
## 23633100             &lt;NA&gt;        &lt;NA&gt;                    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;
## 23633101             &lt;NA&gt;        &lt;NA&gt;                    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;
## 23644546             &lt;NA&gt;        &lt;NA&gt;                    &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;
##          noname note obstacle.wheelchair
## 10585611   &lt;NA&gt; &lt;NA&gt;                &lt;NA&gt;
## 23633084   &lt;NA&gt; &lt;NA&gt;                &lt;NA&gt;
## 23633086   &lt;NA&gt; &lt;NA&gt;                &lt;NA&gt;
## 23633100   &lt;NA&gt; &lt;NA&gt;                &lt;NA&gt;
## 23633101   &lt;NA&gt; &lt;NA&gt;                &lt;NA&gt;
## 23644546   &lt;NA&gt; &lt;NA&gt;                &lt;NA&gt;
##                                       official_name
## 10585611 Autopista Teniente General Juan José Valle
## 23633084                                       &lt;NA&gt;
## 23633086                                       &lt;NA&gt;
## 23633100                                       &lt;NA&gt;
## 23633101                                       &lt;NA&gt;
## 23644546                                       &lt;NA&gt;
##                                           old_name old_ref oneway
## 10585611 Autopista Teniente General Pedro Aramburu    &lt;NA&gt;    yes
## 23633084                                      &lt;NA&gt;    &lt;NA&gt;    yes
## 23633086                                      &lt;NA&gt;    &lt;NA&gt;    yes
## 23633100                                      &lt;NA&gt;    &lt;NA&gt;    yes
## 23633101                                      &lt;NA&gt;    &lt;NA&gt;    yes
## 23644546                                      &lt;NA&gt;    &lt;NA&gt;    yes
##          oneway.bicycle oneway.source opening_hours operator overtaking
## 10585611           &lt;NA&gt;          &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;
## 23633084           &lt;NA&gt;          &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;    forward
## 23633086           &lt;NA&gt;          &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;        yes
## 23633100           &lt;NA&gt;          &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;         no
## 23633101           &lt;NA&gt;          &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;
## 23644546           &lt;NA&gt;          &lt;NA&gt;          &lt;NA&gt;     &lt;NA&gt;    forward
##          park_ride parking parking.condition.both
## 10585611      &lt;NA&gt;    &lt;NA&gt;                   &lt;NA&gt;
## 23633084      &lt;NA&gt;    &lt;NA&gt;                   &lt;NA&gt;
## 23633086      &lt;NA&gt;    &lt;NA&gt;                   &lt;NA&gt;
## 23633100      &lt;NA&gt;    &lt;NA&gt;                   &lt;NA&gt;
## 23633101      &lt;NA&gt;    &lt;NA&gt;                   &lt;NA&gt;
## 23644546      &lt;NA&gt;    &lt;NA&gt;                   &lt;NA&gt;
##          parking.condition.both.maxstay parking.condition.both.residents
## 10585611                           &lt;NA&gt;                             &lt;NA&gt;
## 23633084                           &lt;NA&gt;                             &lt;NA&gt;
## 23633086                           &lt;NA&gt;                             &lt;NA&gt;
## 23633100                           &lt;NA&gt;                             &lt;NA&gt;
## 23633101                           &lt;NA&gt;                             &lt;NA&gt;
## 23644546                           &lt;NA&gt;                             &lt;NA&gt;
##          parking.condition.both.time_interval parking.condition.left
## 10585611                                 &lt;NA&gt;                   &lt;NA&gt;
## 23633084                                 &lt;NA&gt;                   &lt;NA&gt;
## 23633086                                 &lt;NA&gt;                   &lt;NA&gt;
## 23633100                                 &lt;NA&gt;                   &lt;NA&gt;
## 23633101                                 &lt;NA&gt;                   &lt;NA&gt;
## 23644546                                 &lt;NA&gt;                   &lt;NA&gt;
##          parking.condition.left.maxstay parking.condition.left.vehicles
## 10585611                           &lt;NA&gt;                            &lt;NA&gt;
## 23633084                           &lt;NA&gt;                            &lt;NA&gt;
## 23633086                           &lt;NA&gt;                            &lt;NA&gt;
## 23633100                           &lt;NA&gt;                            &lt;NA&gt;
## 23633101                           &lt;NA&gt;                            &lt;NA&gt;
## 23644546                           &lt;NA&gt;                            &lt;NA&gt;
##          parking.condition.right parking.condition.right.maxstay
## 10585611                    &lt;NA&gt;                            &lt;NA&gt;
## 23633084                    &lt;NA&gt;                            &lt;NA&gt;
## 23633086                    &lt;NA&gt;                            &lt;NA&gt;
## 23633100                    &lt;NA&gt;                            &lt;NA&gt;
## 23633101                    &lt;NA&gt;                            &lt;NA&gt;
## 23644546                    &lt;NA&gt;                            &lt;NA&gt;
##          parking.condition.right.time_interval parking.condition.right.vehicles
## 10585611                                  &lt;NA&gt;                             &lt;NA&gt;
## 23633084                                  &lt;NA&gt;                             &lt;NA&gt;
## 23633086                                  &lt;NA&gt;                             &lt;NA&gt;
## 23633100                                  &lt;NA&gt;                             &lt;NA&gt;
## 23633101                                  &lt;NA&gt;                             &lt;NA&gt;
## 23644546                                  &lt;NA&gt;                             &lt;NA&gt;
##          parking.lane.both parking.lane.left parking.lane.left.both
## 10585611              &lt;NA&gt;       no_stopping                   &lt;NA&gt;
## 23633084              &lt;NA&gt;       no_stopping                   &lt;NA&gt;
## 23633086              &lt;NA&gt;              &lt;NA&gt;                   &lt;NA&gt;
## 23633100       no_stopping              &lt;NA&gt;                   &lt;NA&gt;
## 23633101              &lt;NA&gt;       no_stopping                   &lt;NA&gt;
## 23644546              &lt;NA&gt;       no_stopping                   &lt;NA&gt;
##          parking.lane.left.parallel parking.lane.right
## 10585611                       &lt;NA&gt;         no_parking
## 23633084                       &lt;NA&gt;         no_parking
## 23633086                       &lt;NA&gt;               &lt;NA&gt;
## 23633100                       &lt;NA&gt;               &lt;NA&gt;
## 23633101                       &lt;NA&gt;         no_parking
## 23644546                       &lt;NA&gt;         no_parking
##          parking.lane.right.diagonal parking.lanes.left parking.lanes.right
## 10585611                        &lt;NA&gt;               &lt;NA&gt;                &lt;NA&gt;
## 23633084                        &lt;NA&gt;               &lt;NA&gt;                &lt;NA&gt;
## 23633086                        &lt;NA&gt;               &lt;NA&gt;                &lt;NA&gt;
## 23633100                        &lt;NA&gt;               &lt;NA&gt;                &lt;NA&gt;
## 23633101                        &lt;NA&gt;               &lt;NA&gt;                &lt;NA&gt;
## 23644546                        &lt;NA&gt;               &lt;NA&gt;                &lt;NA&gt;
##          passenger_information_display picnic_table placement
## 10585611                          &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
## 23633084                          &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
## 23633086                          &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
## 23633100                          &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
## 23633101                          &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
## 23644546                          &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
##          placement.backward placement.forward proposed proposed.highway
## 10585611               &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;             &lt;NA&gt;
## 23633084               &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;             &lt;NA&gt;
## 23633086               &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;             &lt;NA&gt;
## 23633100               &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;             &lt;NA&gt;
## 23633101               &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;             &lt;NA&gt;
## 23644546               &lt;NA&gt;              &lt;NA&gt;     &lt;NA&gt;             &lt;NA&gt;
##          proposed.lanes proposed.maxspeed proposed.name proposed.oneway
## 10585611           &lt;NA&gt;              &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt;
## 23633084           &lt;NA&gt;              &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt;
## 23633086           &lt;NA&gt;              &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt;
## 23633100           &lt;NA&gt;              &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt;
## 23633101           &lt;NA&gt;              &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt;
## 23644546           &lt;NA&gt;              &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt;
##          proposed.surface  psv psv.lanes public_transport ramp ramp.bicycle
## 10585611             &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;         &lt;NA&gt;
## 23633084             &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;         &lt;NA&gt;
## 23633086             &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;         &lt;NA&gt;
## 23633100             &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;         &lt;NA&gt;
## 23633101             &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;         &lt;NA&gt;
## 23644546             &lt;NA&gt; &lt;NA&gt;      &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;         &lt;NA&gt;
##          ramp.luggage ramp.stroller ramp.wheelchair    ref reg_name
## 10585611         &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt;    RN9     &lt;NA&gt;
## 23633084         &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt; RNA008     &lt;NA&gt;
## 23633086         &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt;  RN174     &lt;NA&gt;
## 23633100         &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt; RNA008     &lt;NA&gt;
## 23633101         &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt; RNA008     &lt;NA&gt;
## 23644546         &lt;NA&gt;          &lt;NA&gt;            &lt;NA&gt; RNA008     &lt;NA&gt;
##          seamark.bridge.category segregated service share_taxi shelter
## 10585611                    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;
## 23633084                    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;
## 23633086              suspension       &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;
## 23633100                    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;
## 23633101                    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;
## 23644546                    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;
##                      short_name shoulder shoulder.access.bicycle shoulder.line
## 10585611        Juan José Valle     &lt;NA&gt;                    &lt;NA&gt;          &lt;NA&gt;
## 23633084 Avenida Circunvalación     &lt;NA&gt;                    &lt;NA&gt;          &lt;NA&gt;
## 23633086                   &lt;NA&gt;     &lt;NA&gt;                    &lt;NA&gt;          &lt;NA&gt;
## 23633100 Avenida Circunvalación     &lt;NA&gt;                    &lt;NA&gt;          &lt;NA&gt;
## 23633101 Avenida Circunvalación     &lt;NA&gt;                    &lt;NA&gt;          &lt;NA&gt;
## 23644546 Avenida Circunvalación     &lt;NA&gt;                    &lt;NA&gt;          &lt;NA&gt;
##          shoulder.right shoulder.right.surface shoulder.surface sidewalk
## 10585611           &lt;NA&gt;                   &lt;NA&gt;             &lt;NA&gt;     &lt;NA&gt;
## 23633084           &lt;NA&gt;                   &lt;NA&gt;             &lt;NA&gt;     &lt;NA&gt;
## 23633086           &lt;NA&gt;                   &lt;NA&gt;             &lt;NA&gt;     &lt;NA&gt;
## 23633100           &lt;NA&gt;                   &lt;NA&gt;             &lt;NA&gt;     &lt;NA&gt;
## 23633101           &lt;NA&gt;                   &lt;NA&gt;             &lt;NA&gt;     &lt;NA&gt;
## 23644546           &lt;NA&gt;                   &lt;NA&gt;             &lt;NA&gt;     &lt;NA&gt;
##          sidewalk.both.surface sidewalk.oneway sidewalk.right
## 10585611                  &lt;NA&gt;            &lt;NA&gt;           &lt;NA&gt;
## 23633084                  &lt;NA&gt;            &lt;NA&gt;           &lt;NA&gt;
## 23633086                  &lt;NA&gt;            &lt;NA&gt;           &lt;NA&gt;
## 23633100                  &lt;NA&gt;            &lt;NA&gt;           &lt;NA&gt;
## 23633101                  &lt;NA&gt;            &lt;NA&gt;           &lt;NA&gt;
## 23644546                  &lt;NA&gt;            &lt;NA&gt;           &lt;NA&gt;
##          sidewalk.right.surface smoothness sorting_name source source.bridge
## 10585611                   &lt;NA&gt;       &lt;NA&gt;         &lt;NA&gt;   &lt;NA&gt;          &lt;NA&gt;
## 23633084                   &lt;NA&gt;       &lt;NA&gt;         &lt;NA&gt;   &lt;NA&gt;          &lt;NA&gt;
## 23633086                   &lt;NA&gt;       &lt;NA&gt;         &lt;NA&gt;   &lt;NA&gt;          &lt;NA&gt;
## 23633100                   &lt;NA&gt;       &lt;NA&gt;         &lt;NA&gt;   &lt;NA&gt;          &lt;NA&gt;
## 23633101                   &lt;NA&gt;       &lt;NA&gt;         &lt;NA&gt;   &lt;NA&gt;          &lt;NA&gt;
## 23644546                   &lt;NA&gt;       &lt;NA&gt;         &lt;NA&gt;   &lt;NA&gt;          &lt;NA&gt;
##          source.hgv source.highway source.imagery source.lanes source.maxheight
## 10585611       &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt;             &lt;NA&gt;
## 23633084       &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt;             &lt;NA&gt;
## 23633086       &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt;             &lt;NA&gt;
## 23633100       &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt;             &lt;NA&gt;
## 23633101       &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt;             &lt;NA&gt;
## 23644546       &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;         &lt;NA&gt;             &lt;NA&gt;
##          source.maxspeed source.minspeed source.motor_vehicle.conditional
## 10585611            &lt;NA&gt;            &lt;NA&gt;                             &lt;NA&gt;
## 23633084            sign            sign                             &lt;NA&gt;
## 23633086            &lt;NA&gt;  sign;Mapillary                             &lt;NA&gt;
## 23633100            sign            sign                             &lt;NA&gt;
## 23633101            sign            sign                             &lt;NA&gt;
## 23644546            sign            sign                             &lt;NA&gt;
##                                                                                source.name
## 10585611 http://infoleg.mecon.gov.ar/infolegInternet/anexos/225000-229999/225220/norma.htm
## 23633084                                                                              &lt;NA&gt;
## 23633086                                                                              &lt;NA&gt;
## 23633100                                                                              &lt;NA&gt;
## 23633101                                                                              &lt;NA&gt;
## 23644546                                                                              &lt;NA&gt;
##          source.oneway source.parking.lane.both source.parking.lanes.both
## 10585611          &lt;NA&gt;                     &lt;NA&gt;                      &lt;NA&gt;
## 23633084          &lt;NA&gt;                     &lt;NA&gt;                      &lt;NA&gt;
## 23633086          &lt;NA&gt;                     &lt;NA&gt;                      &lt;NA&gt;
## 23633100          &lt;NA&gt;                     &lt;NA&gt;                      &lt;NA&gt;
## 23633101          &lt;NA&gt;                     &lt;NA&gt;                      &lt;NA&gt;
## 23644546          &lt;NA&gt;                     &lt;NA&gt;                      &lt;NA&gt;
##          source.proposed source.proposed.lanes
## 10585611            &lt;NA&gt;                  &lt;NA&gt;
## 23633084            &lt;NA&gt;                  &lt;NA&gt;
## 23633086            &lt;NA&gt;                  &lt;NA&gt;
## 23633100            &lt;NA&gt;                  &lt;NA&gt;
## 23633101            &lt;NA&gt;                  &lt;NA&gt;
## 23644546            &lt;NA&gt;                  &lt;NA&gt;
##                                                     source.ref source.surface
## 10585611 http://forum.openstreetmap.org/viewtopic.php?id=31749           &lt;NA&gt;
## 23633084                                                  &lt;NA&gt;           &lt;NA&gt;
## 23633086                                                  &lt;NA&gt;           &lt;NA&gt;
## 23633100                                                  &lt;NA&gt;           &lt;NA&gt;
## 23633101                                                  &lt;NA&gt;           &lt;NA&gt;
## 23644546                                                  &lt;NA&gt;           &lt;NA&gt;
##          sport step_count supervised surface surface.bicycle surface.lanes
## 10585611  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt; asphalt            &lt;NA&gt;          &lt;NA&gt;
## 23633084  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt; asphalt            &lt;NA&gt;          &lt;NA&gt;
## 23633086  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt; asphalt            &lt;NA&gt;          &lt;NA&gt;
## 23633100  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt; asphalt            &lt;NA&gt;          &lt;NA&gt;
## 23633101  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt; asphalt            &lt;NA&gt;          &lt;NA&gt;
## 23644546  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt; asphalt            &lt;NA&gt;          &lt;NA&gt;
##          surface.lanes.backward surface.lanes.forward surveillance
## 10585611                   &lt;NA&gt;                  &lt;NA&gt;         &lt;NA&gt;
## 23633084                   &lt;NA&gt;                  &lt;NA&gt;         &lt;NA&gt;
## 23633086                   &lt;NA&gt;                  &lt;NA&gt;         &lt;NA&gt;
## 23633100                   &lt;NA&gt;                  &lt;NA&gt;         &lt;NA&gt;
## 23633101                   &lt;NA&gt;                  &lt;NA&gt;         &lt;NA&gt;
## 23644546                   &lt;NA&gt;                  &lt;NA&gt;         &lt;NA&gt;
##          surveillance.type tactile_paving taxi taxi.lanes toilets toll tourism
## 10585611              &lt;NA&gt;           &lt;NA&gt; &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
## 23633084              &lt;NA&gt;           &lt;NA&gt; &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
## 23633086              &lt;NA&gt;           &lt;NA&gt; &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt;  yes    &lt;NA&gt;
## 23633100              &lt;NA&gt;           &lt;NA&gt; &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
## 23633101              &lt;NA&gt;           &lt;NA&gt; &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
## 23644546              &lt;NA&gt;           &lt;NA&gt; &lt;NA&gt;       &lt;NA&gt;    &lt;NA&gt; &lt;NA&gt;    &lt;NA&gt;
##          tourist_bus tracktype traffic traffic_calming train trolley_wire
## 10585611        &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt;
## 23633084        &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt;
## 23633086        &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt;
## 23633100        &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt;
## 23633101        &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt;
## 23644546        &lt;NA&gt;      &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt;
##          trolleybus tunnel turn                   turn.lanes
## 10585611       &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt;                         &lt;NA&gt;
## 23633084       &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt;                         &lt;NA&gt;
## 23633086       &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt;                         &lt;NA&gt;
## 23633100       &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt; through|through|slight_right
## 23633101       &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt; through|through|slight_right
## 23644546       &lt;NA&gt;   &lt;NA&gt; &lt;NA&gt;                         &lt;NA&gt;
##          turn.lanes.backward turn.lanes.forward vehicle vehicle.conditional
## 10585611                &lt;NA&gt;               &lt;NA&gt;    &lt;NA&gt;                &lt;NA&gt;
## 23633084                &lt;NA&gt;               &lt;NA&gt;    &lt;NA&gt;                &lt;NA&gt;
## 23633086                &lt;NA&gt;               &lt;NA&gt;    &lt;NA&gt;                &lt;NA&gt;
## 23633100                &lt;NA&gt;               &lt;NA&gt;    &lt;NA&gt;                &lt;NA&gt;
## 23633101                &lt;NA&gt;               &lt;NA&gt;    &lt;NA&gt;                &lt;NA&gt;
## 23644546                &lt;NA&gt;               &lt;NA&gt;    &lt;NA&gt;                &lt;NA&gt;
##          water wheelchair wheelchair.description width wikidata
## 10585611  &lt;NA&gt;       &lt;NA&gt;                   &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;
## 23633084  &lt;NA&gt;       &lt;NA&gt;                   &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;
## 23633086  &lt;NA&gt;       &lt;NA&gt;                   &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;
## 23633100  &lt;NA&gt;       &lt;NA&gt;                   &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;
## 23633101  &lt;NA&gt;       &lt;NA&gt;                   &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;
## 23644546  &lt;NA&gt;       &lt;NA&gt;                   &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;
##          wikimedia_commons wikipedia                       geometry
## 10585611              &lt;NA&gt;      &lt;NA&gt; LINESTRING (-60.66396 -33.0...
## 23633084              &lt;NA&gt;      &lt;NA&gt; LINESTRING (-60.71845 -32.8...
## 23633086              &lt;NA&gt;      &lt;NA&gt; LINESTRING (-60.68246 -32.8...
## 23633100              &lt;NA&gt;      &lt;NA&gt; LINESTRING (-60.70536 -32.8...
## 23633101              &lt;NA&gt;      &lt;NA&gt; LINESTRING (-60.7047 -32.87...
## 23644546              &lt;NA&gt;      &lt;NA&gt; LINESTRING (-60.71891 -32.8...</code></pre>
</div>
<div id="visualizando-los-resultados" class="section level3">
<h3><span class="header-section-number">3.1.3</span> Visualizando los resultados</h3>
<p>Dado que las calles han sido descargadas en formato <code>sf</code>, podemos visualizarlas con <code>ggplot:</code> y <code>geom_sf</code>:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb106-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> calles)</a></code></pre></div>
<p><img src="analitica_urbana_files/figure-html/unnamed-chunk-77-1.png" width="672" /></p>
<p>Las calles exceden los límites de Rosario, ya que tenemos todos los datos encontrados dentro del rectángulo de la <em>bounding box</em>. Para “recortar” los datos conservando solo las calles de la ciudad, podemos extraer su intersección con el polígono de límites que obtuvimos antes.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1">calles &lt;-<span class="st"> </span><span class="kw">st_intersection</span>(calles, bbox_poly)</a></code></pre></div>
<p>Ahora si!</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb108-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> calles)</a></code></pre></div>
<p><img src="analitica_urbana_files/figure-html/unnamed-chunk-79-1.png" width="672" /></p>
<p>Podemos visualizar atributos de las calles, por ejemplo el de la velocidad máxima permitida, que está presente para casi todas. Pero antes va a ser necesario limpiar un poco los datos… como es usual.</p>
<p>Los <em>dataframes</em> en formato <code>sf</code> que crea <code>osmdata</code> tienen todos los valores en formato texto, incluso aquellos que son números como <em>maxspeed</em> (la velocidad máxima), o <em>lanes</em>, la cantidad de carriles. Lo arreglamos:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1">calles &lt;-<span class="st"> </span>calles <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb109-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">maxspeed =</span> <span class="kw">as.numeric</span>(maxspeed),</a>
<a class="sourceLine" id="cb109-3" data-line-number="3">         <span class="dt">lanes =</span> <span class="kw">ifelse</span>(<span class="kw">is.na</span>(lanes), <span class="dv">1</span>, <span class="kw">as.numeric</span>(lanes)))</a></code></pre></div>
<p>Con eso tenemos limpias las variables de velocidad máxima y ancho en carriles. Listos para visualizar.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="kw">ggplot</span>(calles) <span class="op">+</span></a>
<a class="sourceLine" id="cb110-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_sf</span>(<span class="kw">aes</span>(<span class="dt">color =</span> maxspeed), <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb110-3" data-line-number="3"><span class="st">    </span><span class="kw">scale_color_viridis_c</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb110-4" data-line-number="4"><span class="st">      </span><span class="kw">theme_void</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb110-5" data-line-number="5"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Rosario&quot;</span>,</a>
<a class="sourceLine" id="cb110-6" data-line-number="6">         <span class="dt">subtitle =</span> <span class="st">&quot;Vías de circulación&quot;,</span></a>
<a class="sourceLine" id="cb110-7" data-line-number="7"><span class="st">         caption = &quot;</span>fuente<span class="op">:</span><span class="st"> </span>OpenStreetMap<span class="st">&quot;,</span></a>
<a class="sourceLine" id="cb110-8" data-line-number="8"><span class="st">         color = &quot;</span>velocidad máxima<span class="st">&quot;)</span></a></code></pre></div>
<p><img src="analitica_urbana_files/figure-html/unnamed-chunk-81-1.png" width="672" /></p>
<p>O podemos revisar la posición de las avenidas:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb111-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> calles,</a>
<a class="sourceLine" id="cb111-3" data-line-number="3">             <span class="dt">color =</span> <span class="st">&quot;gray40&quot;</span>, <span class="dt">alpha =</span> <span class="fl">.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb111-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> <span class="kw">filter</span>(calles, <span class="kw">str_detect</span>(name, <span class="st">&quot;Avenida&quot;</span>)), </a>
<a class="sourceLine" id="cb111-5" data-line-number="5">            <span class="dt">color =</span> <span class="st">&quot;salmon&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb111-6" data-line-number="6"><span class="st">    </span><span class="kw">theme_void</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb111-7" data-line-number="7"><span class="st">      </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Rosario&quot;</span>,</a>
<a class="sourceLine" id="cb111-8" data-line-number="8">         <span class="dt">subtitle =</span> <span class="st">&quot;Avenidas&quot;</span>,</a>
<a class="sourceLine" id="cb111-9" data-line-number="9">         <span class="dt">caption =</span> <span class="st">&quot;fuente: OpenStreetMap&quot;</span>)</a></code></pre></div>
<p><img src="analitica_urbana_files/figure-html/unnamed-chunk-82-1.png" width="672" /></p>
</div>
</div>
<div id="un-ejercicio-más-bares-en-el-barrio" class="section level2">
<h2><span class="header-section-number">3.2</span> Un ejercicio más: ¡Bares en el barrio!</h2>
<p>Imaginemos que estamos interesados en identificar y caracterizas los bares presentes en un barrio determinado, como San Telmo en la Ciudad de Buenos Aires. Como punto de partida, podemos consultar la base de OSM a ver que encontramos.</p>
<p>Comenzamos por definir nuestra área de interés</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1">bbox_st &lt;-<span class="st"> </span><span class="kw">getbb</span>(<span class="st">&#39;San Telmo, Ciudad Autonoma de Buenos Aires&#39;</span>)</a>
<a class="sourceLine" id="cb112-2" data-line-number="2"></a>
<a class="sourceLine" id="cb112-3" data-line-number="3">bbox_st_poly =<span class="st"> </span><span class="kw">getbb</span>(<span class="st">&#39;San Telmo, Ciudad Autonoma de Buenos Aires&#39;</span>, <span class="dt">format_out =</span> <span class="st">&quot;sf_polygon&quot;</span>)</a>
<a class="sourceLine" id="cb112-4" data-line-number="4"></a>
<a class="sourceLine" id="cb112-5" data-line-number="5"><span class="kw">leaflet</span>(bbox_st_poly) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb112-6" data-line-number="6"><span class="st">  </span><span class="kw">addTiles</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb112-7" data-line-number="7"><span class="st">  </span><span class="kw">addPolygons</span>()</a></code></pre></div>
<div id="htmlwidget-3a1ab243b4fef5c61107" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3a1ab243b4fef5c61107">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolygons","args":[[[[{"lng":[-58.3774268,-58.3773612,-58.3773066,-58.3772728,-58.3772388,-58.3772005,-58.3771946,-58.3771606,-58.3771441,-58.3771059,-58.3767815,-58.3767583,-58.3767226,-58.3762065,-58.3756217,-58.3747056,-58.3746446,-58.3745854,-58.3744902,-58.3738806,-58.3737178,-58.3725549,-58.3724413,-58.3709772,-58.3709683,-58.3707674,-58.3706979,-58.3706599,-58.3706335,-58.3706141,-58.3705885,-58.3705621,-58.3705349,-58.3705031,-58.3704763,-58.3704445,-58.3704119,-58.3703836,-58.3703339,-58.3702851,-58.3701718,-58.3694402,-58.3683922,-58.3680889,-58.3680363,-58.3679922,-58.3679699,-58.3679692,-58.3664939,-58.3647447,-58.3642832,-58.3638706,-58.3634227,-58.3635501,-58.3636554,-58.3637351,-58.3638435,-58.3643029,-58.3648459,-58.3649512,-58.3655215,-58.3655988,-58.365658,-58.3657094,-58.3657466,-58.3657945,-58.3658147,-58.3658464,-58.3659354,-58.3659434,-58.3660331,-58.3660873,-58.3661913,-58.3662771,-58.3664066,-58.3665212,-58.3666757,-58.3666859,-58.3668166,-58.3675674,-58.3688535,-58.3690084,-58.3691092,-58.3691927,-58.3694415,-58.3702474,-58.3705717,-58.3717268,-58.3731417,-58.3740885,-58.3745306,-58.374765,-58.3758535,-58.3759776,-58.3774268],"lat":[-34.6162844,-34.6174612,-34.618546,-34.6197291,-34.6209012,-34.6220596,-34.622193,-34.6226908,-34.6229007,-34.6234828,-34.6250289,-34.6251029,-34.6252,-34.6262604,-34.6272649,-34.6268039,-34.6267844,-34.6267763,-34.6267694,-34.6267378,-34.6267307,-34.6266861,-34.6266778,-34.6265968,-34.6266845,-34.6281221,-34.6288403,-34.6289035,-34.6289418,-34.6289674,-34.6289936,-34.6290172,-34.6290319,-34.6290426,-34.629047,-34.629048,-34.6290474,-34.6290453,-34.6290376,-34.6290287,-34.6289982,-34.6283326,-34.6273815,-34.6271562,-34.6271006,-34.6270202,-34.6269113,-34.6252078,-34.6251882,-34.6251494,-34.6251466,-34.6251441,-34.6250613,-34.6249806,-34.6249524,-34.6249241,-34.624884,-34.6246414,-34.6243187,-34.6242601,-34.6239472,-34.6239083,-34.6238687,-34.6238304,-34.6237893,-34.6237105,-34.623658,-34.6234803,-34.6226531,-34.6225652,-34.6219084,-34.6215032,-34.6208353,-34.6204479,-34.6192527,-34.6181334,-34.6168739,-34.6167806,-34.6156291,-34.6156888,-34.6157906,-34.6158024,-34.6158108,-34.6158178,-34.6158394,-34.6158833,-34.6159073,-34.6160069,-34.6160454,-34.6160878,-34.616104,-34.616122,-34.6162055,-34.616215,-34.6162844]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-34.629048,-34.6156291],"lng":[-58.3774268,-58.3634227]}},"evals":[],"jsHooks":[]}</script>
<p>Habiendo verificado que tenemos el área correcta, armamos una consulta por la grilla de calles, y la ejecutamos.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1">SanTelmo_calles &lt;-<span class="st"> </span><span class="kw">opq</span>(bbox_st) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb113-2" data-line-number="2"><span class="st">    </span><span class="kw">add_osm_feature</span>(<span class="dt">key =</span> <span class="st">&quot;highway&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb113-3" data-line-number="3"><span class="st">    </span><span class="kw">osmdata_sf</span>()</a></code></pre></div>
<p>Y también descargamos información sobre la posición de bares. Habiendo revisado <a href="https://wiki.openstreetmap.org/wiki/Map_Features" class="uri">https://wiki.openstreetmap.org/wiki/Map_Features</a>, sabemos que para obtener bares necesitamos la categoría “amenity”, y el subtipo “bar”. En términos de OSM, <code>key = &quot;amenity&quot;, value = &quot;bar&quot;</code>:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1">SanTelmo_bares &lt;-<span class="st"> </span><span class="kw">opq</span>(bbox_st) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb114-2" data-line-number="2"><span class="st">  </span><span class="kw">add_osm_feature</span>(<span class="dt">key =</span> <span class="st">&quot;amenity&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;bar&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb114-3" data-line-number="3"><span class="st">  </span><span class="kw">osmdata_sf</span>() </a></code></pre></div>
<p>Extraemos la información dentro de los límites exactos del barrio.</p>
<p>A diferencia de las calles, que aparecen en la geometría de líneas, para los bares nos interesan los puntos.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1">SanTelmo_calles &lt;-<span class="st"> </span><span class="kw">st_intersection</span>(SanTelmo_calles<span class="op">$</span>osm_lines, bbox_st_poly)</a>
<a class="sourceLine" id="cb115-2" data-line-number="2">SanTelmo_bares &lt;-<span class="st"> </span><span class="kw">st_intersection</span>(SanTelmo_bares<span class="op">$</span>osm_points, bbox_st_poly)</a></code></pre></div>
<p>Y listos para mapear! De paso, resaltamos aquellos donde se baila tango, al colorear según el atributo “dance.style”, incluido en los datos.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb116-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> SanTelmo_calles, </a>
<a class="sourceLine" id="cb116-3" data-line-number="3">            <span class="dt">color =</span> <span class="st">&quot;darkslateblue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb116-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> SanTelmo_bares, </a>
<a class="sourceLine" id="cb116-5" data-line-number="5">            <span class="kw">aes</span>(<span class="dt">color =</span> dance.style)) <span class="op">+</span></a>
<a class="sourceLine" id="cb116-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_sf_label</span>(<span class="dt">data =</span> SanTelmo_bares, </a>
<a class="sourceLine" id="cb116-7" data-line-number="7">                  <span class="kw">aes</span>(<span class="dt">label =</span> name), <span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb116-8" data-line-number="8"><span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb116-9" data-line-number="9"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;San Telmo&quot;</span>,</a>
<a class="sourceLine" id="cb116-10" data-line-number="10">       <span class="dt">subtitle =</span> <span class="st">&quot;Bares&quot;</span>,</a>
<a class="sourceLine" id="cb116-11" data-line-number="11">       <span class="dt">caption =</span> <span class="st">&quot;fuente: OpenStreetMap&quot;</span>,</a>
<a class="sourceLine" id="cb116-12" data-line-number="12">       <span class="dt">color =</span> <span class="st">&quot;Ofrecen baile&quot;</span>)</a></code></pre></div>
<p><img src="analitica_urbana_files/figure-html/unnamed-chunk-88-1.png" width="672" /></p>
<p>Casi listo. Antes de darnos por satisfechos, tenemos que mejorar la ubicación de las etiquetas, que se superponen por la proximidad de los lugares.</p>
<p>Por el momento geom_sf_label() -la geometría de ggplot que permite graficar etiquetas de datos <em>sf</em>- no incluye la útil opción de correr la posición de las etiquetas en forma automática para que no se solapen. Por suerte, existe un pequeño paquete, <code>ggsflabel</code>, que provee la funcionalidad que necesitamos.</p>
<p>Podemos instalar el paquete directo desde el repositorio de su autor:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</a>
<a class="sourceLine" id="cb117-2" data-line-number="2">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;yutannihilation/ggsflabel&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" data-line-number="1"><span class="kw">library</span>(ggsflabel)</a></code></pre></div>
<p>Y ahora, usamos <code>geom_sf_label_repel()</code> para la versión final de nuestro mapa de bares en San Telmo:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb119-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> SanTelmo_calles, </a>
<a class="sourceLine" id="cb119-3" data-line-number="3">            <span class="dt">color =</span> <span class="st">&quot;darkslateblue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb119-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> SanTelmo_bares, </a>
<a class="sourceLine" id="cb119-5" data-line-number="5">            <span class="kw">aes</span>(<span class="dt">color =</span> dance.style)) <span class="op">+</span></a>
<a class="sourceLine" id="cb119-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_sf_label_repel</span>(<span class="dt">data =</span> SanTelmo_bares, </a>
<a class="sourceLine" id="cb119-7" data-line-number="7">                  <span class="kw">aes</span>(<span class="dt">label =</span> name), <span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb119-8" data-line-number="8"><span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb119-9" data-line-number="9"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;San Telmo&quot;</span>,</a>
<a class="sourceLine" id="cb119-10" data-line-number="10">       <span class="dt">subtitle =</span> <span class="st">&quot;Bares&quot;</span>,</a>
<a class="sourceLine" id="cb119-11" data-line-number="11">       <span class="dt">caption =</span> <span class="st">&quot;fuente: OpenStreetMap&quot;</span>,</a>
<a class="sourceLine" id="cb119-12" data-line-number="12">       <span class="dt">color =</span> <span class="st">&quot;Ofrecen baile&quot;</span>)</a></code></pre></div>
<p><img src="analitica_urbana_files/figure-html/unnamed-chunk-91-1.png" width="672" /></p>
</div>
<div id="ejercicios-1" class="section level2">
<h2><span class="header-section-number">3.3</span> Ejercicios</h2>
<p><strong>Explorando y mapeando información georreferenciada de OpenStreetMap</strong></p>
<p>I. Descargar de OpenStreetMap la grilla de calles para la Ciudad elegida en el capítulo 2 (Geoprocesamiento) y mapearla por uno de sus atributos (velocidad mínima, velocidad máxima, cantidad de carriles, etc).</p>
<ol start="2" style="list-style-type: upper-roman">
<li>Descargar de OpenStreetMap una (o más) capas de datos de tipo puntos o polígonos. Ver catálogo de categorías en <a href="https://wiki.openstreetmap.org/wiki/Map_Features">este link</a></li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>Proyectar los datos descargados en un mapa y comentar los resultados: ¿Cómo se distribuyen en la Ciudad?</li>
<li>Hacer un conteo de los ítems de la capa descargada por barrio, mapearlo y compararlo con el conteo de los ítems descargados en el ejercicio anterior: ¿La distribución es similar o hay diferencias? ¿A qué se puede deber?</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="geoprocesamiento.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="obteniendo-y-analizando-datos-de-redes-sociales.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["analitica_urbana.pdf", "analitica_urbana.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
